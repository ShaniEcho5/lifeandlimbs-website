<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Life and Limb Blog Manager</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f8fafc;
      min-height: 100vh;
    }
    .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
    .header { 
      background: #2563eb; 
      color: white; 
      padding: 20px 0; 
      margin-bottom: 30px;
      text-align: center;
    }
    .header h1 { font-size: 28px; font-weight: 600; }
    .header p { opacity: 0.9; margin-top: 8px; }
    
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
    @media (max-width: 768px) { .grid { grid-template-columns: 1fr; } }
    
    .card { 
      background: white; 
      border-radius: 12px; 
      padding: 25px; 
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }
    .card h2 { color: #1e293b; margin-bottom: 20px; font-size: 20px; }
    
    .form-group { margin-bottom: 20px; }
    .form-group label { 
      display: block; 
      margin-bottom: 8px; 
      font-weight: 500; 
      color: #374151;
    }
    .form-group input, .form-group textarea { 
      width: 100%; 
      padding: 12px; 
      border: 2px solid #e5e7eb; 
      border-radius: 8px; 
      font-size: 14px;
      transition: border-color 0.2s;
    }
    .form-group input:focus, .form-group textarea:focus { 
      outline: none; 
      border-color: #2563eb; 
    }
    
    .btn { 
      background: #2563eb; 
      color: white; 
      padding: 12px 24px; 
      border: none; 
      border-radius: 8px; 
      font-weight: 500; 
      cursor: pointer; 
      font-size: 14px;
      transition: background 0.2s;
    }
    .btn:hover { background: #1d4ed8; }
    .btn-secondary { background: #6b7280; }
    .btn-secondary:hover { background: #4b5563; }
    
    .existing-posts { margin-top: 30px; }
    .post-item { 
      background: white; 
      border-radius: 8px; 
      padding: 20px; 
      margin-bottom: 15px; 
      border-left: 4px solid #2563eb;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }
    .post-item h3 { color: #1e293b; margin-bottom: 8px; }
    .post-item p { color: #6b7280; margin-bottom: 8px; }
    .post-item small { color: #9ca3af; }
    .post-item .actions { margin-top: 12px; }
    .post-item .actions button { margin-right: 10px; }
    
    .output { 
      margin-top: 20px; 
      padding: 20px; 
      background: #f1f5f9; 
      border-radius: 8px; 
      border: 2px solid #e2e8f0;
    }
    .output textarea { 
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace; 
      font-size: 13px;
      background: #1e293b;
      color: #e2e8f0;
      border: none;
      padding: 20px;
      border-radius: 8px;
    }
    
    .image-upload-section {
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .upload-btn {
      background: #3b82f6;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      transition: background-color 0.2s;
    }
    
    .upload-btn:hover {
      background: #2563eb;
    }
    
    .clear-btn {
      background: #ef4444;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      transition: background-color 0.2s;
    }
    
    .clear-btn:hover {
      background: #dc2626;
    }
    
    .image-preview {
      margin-top: 10px;
    }
    
    #banner {
      flex: 1;
      min-width: 200px;
    }
    
    .instructions { 
      background: #dbeafe; 
      border: 1px solid #93c5fd; 
      border-radius: 8px; 
      padding: 16px; 
      margin-top: 16px;
    }
    .instructions h4 { color: #1e40af; margin-bottom: 12px; }
    .instructions ol { margin-left: 20px; }
    .instructions li { margin-bottom: 8px; color: #1e3a8a; }
    .instructions code { 
      background: #1e3a8a; 
      color: white; 
      padding: 2px 6px; 
      border-radius: 4px; 
      font-size: 12px;
    }
    
    .success { 
      background: #dcfce7; 
      border: 1px solid #86efac; 
      color: #166534; 
      padding: 12px; 
      border-radius: 8px; 
      margin-bottom: 16px;
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="container">
      <h1>Life and Limb Blog Manager</h1>
      <p>Create and manage your blog posts easily</p>
    </div>
  </div>
  
  <div class="container">
    <div class="grid">
      <div class="card">
        <h2>‚úèÔ∏è Create New Blog Post</h2>
        <form id="postForm">
          <div class="form-group">
            <label for="title">Post Title *</label>
            <input type="text" id="title" placeholder="Enter your post title" required>
          </div>
          
          <div class="form-group">
            <label for="date">Publication Date *</label>
            <input type="date" id="date" required>
          </div>
          
          <div class="form-group">
            <label for="description">Description *</label>
            <textarea id="description" placeholder="Brief description for SEO and social sharing" rows="3" required></textarea>
          </div>
          
          <div class="form-group">
            <label for="banner">Featured Image</label>
            <div class="image-upload-section">
              <input type="file" id="imageUpload" accept="image/*" style="display: none;">
              <button type="button" id="uploadBtn" class="upload-btn">üìÅ Choose Image</button>
              <input type="text" id="banner" placeholder="/images/your-image.jpg" readonly>
              <button type="button" id="clearImage" class="clear-btn" style="display: none;">‚úñ Clear</button>
            </div>
            <div id="imagePreview" class="image-preview" style="display: none;">
              <img id="previewImg" src="" alt="Preview" style="max-width: 200px; max-height: 150px; border-radius: 4px; margin-top: 10px;">
            </div>
          </div>
          
          <div class="form-group">
            <label for="content">Post Content (Markdown) *</label>
            <textarea id="content" placeholder="Write your post content in Markdown format..." rows="12" required></textarea>
          </div>
          
          <button type="submit" class="btn">Generate Blog Post</button>
          <button type="button" class="btn btn-secondary" onclick="clearForm()">Clear Form</button>
        </form>
      </div>
      
      <div class="card">
        <h2>üìù Blog Posts</h2>
        <p style="color: #6b7280; margin-bottom: 20px;">Your existing posts are automatically displayed at <strong>/blog</strong></p>
        
        <div class="existing-posts">
          <div class="post-item">
            <h3>Welcome to Life and Limb Blog</h3>
            <p>Introducing our new blog where we share stories of hope...</p>
            <small>üìÖ January 15, 2024</small>
            <div class="actions">
              <button class="btn" onclick="window.open('/blog/welcome-to-our-blog', '_blank')">View Post</button>
            </div>
          </div>
          
          <div class="post-item">
            <h3>3D Printing Technology</h3>
            <p>Advanced 3D printing revolutionizes prosthetic care...</p>
            <small>üìÖ February 1, 2024</small>
            <div class="actions">
              <button class="btn" onclick="window.open('/blog/3d-printing-technology', '_blank')">View Post</button>
            </div>
          </div>
          
          <div class="post-item">
            <h3>Community Support Program</h3>
            <p>Empowering families beyond prosthetics...</p>
            <small>üìÖ February 15, 2024</small>
            <div class="actions">
              <button class="btn" onclick="window.open('/blog/community-support-program', '_blank')">View Post</button>
            </div>
          </div>
        </div>
        
        <div style="margin-top: 20px; padding: 16px; background: #f8fafc; border-radius: 8px;">
          <h4>üìö Quick Links</h4>
          <button class="btn" onclick="window.open('/blog', '_blank')" style="margin: 5px;">View All Posts</button>
          <button class="btn btn-secondary" onclick="window.open('/', '_blank')" style="margin: 5px;">Main Site</button>
        </div>
      </div>
    </div>
    
    <div id="output"></div>
  </div>
  
  <script>
    // Set today's date as default
    document.getElementById('date').valueAsDate = new Date();
    
    // Image upload functionality
    const imageUpload = document.getElementById('imageUpload');
    const uploadBtn = document.getElementById('uploadBtn');
    const bannerInput = document.getElementById('banner');
    const clearBtn = document.getElementById('clearImage');
    const imagePreview = document.getElementById('imagePreview');
    const previewImg = document.getElementById('previewImg');
    
    uploadBtn.addEventListener('click', () => {
      imageUpload.click();
    });
    
    imageUpload.addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (file) {
        // Validate file type
        if (!file.type.startsWith('image/')) {
          alert('Please select an image file.');
          return;
        }
        
        // Validate file size (5MB limit)
        if (file.size > 5 * 1024 * 1024) {
          alert('File size must be less than 5MB.');
          return;
        }
        
        // Generate filename with timestamp to avoid conflicts
        const timestamp = Date.now();
        const extension = file.name.split('.').pop();
        const filename = `blog-${timestamp}.${extension}`;
        
        // Set the banner path
        bannerInput.value = `/images/${filename}`;
        
        // Show preview
        const reader = new FileReader();
        reader.onload = function(e) {
          previewImg.src = e.target.result;
          imagePreview.style.display = 'block';
          clearBtn.style.display = 'inline-block';
        };
        reader.readAsDataURL(file);
        
        // Show instructions for manual file placement
        showUploadInstructions(filename);
      }
    });
    
    clearBtn.addEventListener('click', () => {
      bannerInput.value = '';
      imagePreview.style.display = 'none';
      clearBtn.style.display = 'none';
      imageUpload.value = '';
    });
    
    function showUploadInstructions(filename) {
      const instructions = `
üìã UPLOAD INSTRUCTIONS:
1. Save the selected image as: ${filename}
2. Copy it to: /public/images/
3. The banner path is already set to: /images/${filename}

Note: You need to manually copy the image file to the public/images directory in your project.
      `;
      
      // Create a temporary alert or add to the form
      const existingAlert = document.querySelector('.upload-alert');
      if (existingAlert) {
        existingAlert.remove();
      }
      
      const alert = document.createElement('div');
      alert.className = 'upload-alert';
      alert.style.cssText = `
        background: #fef3c7;
        border: 1px solid #f59e0b;
        color: #92400e;
        padding: 12px;
        border-radius: 6px;
        margin: 10px 0;
        white-space: pre-line;
        font-family: monospace;
        font-size: 12px;
      `;
      alert.textContent = instructions;
      
      document.querySelector('.image-upload-section').appendChild(alert);
      
      // Auto-remove after 30 seconds
      setTimeout(() => {
        if (alert.parentNode) {
          alert.remove();
        }
      }, 30000);
    }
    
    document.getElementById('postForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const title = document.getElementById('title').value.trim();
      const date = document.getElementById('date').value;
      const description = document.getElementById('description').value.trim();
      const banner = document.getElementById('banner').value.trim();
      const content = document.getElementById('content').value.trim();
      
      if (!title || !date || !description || !content) {
        alert('Please fill in all required fields marked with *');
        return;
      }
      
      // Generate slug from title
      const slug = title.toLowerCase()
        .replace(/[^a-z0-9]+/g, '-')
        .replace(/(^-|-$)/g, '');
      
      // Generate markdown content
      const markdown = `---
title: "${title}"
date: "${date}"
description: "${description}"${banner ? `\nbanner: "${banner}"` : ''}
---

${content}`;
      
      // Show output
      const output = document.getElementById('output');
      output.innerHTML = `
        <div class="card">
          <div class="success">
            ‚úÖ Blog post generated successfully! File name: <strong>${slug}.md</strong>
          </div>
          
          <h2>üìÑ Generated Markdown File</h2>
          <textarea readonly rows="20" onclick="this.select()">${markdown}</textarea>
          
          <div class="instructions">
            <h4>üìã How to publish this post:</h4>
            <ol>
              <li>Copy the markdown content above (click to select all)</li>
              <li>Create a new file: <code>posts/${slug}.md</code> in your project</li>
              <li>Paste the content and save the file</li>
              <li>Your post will be available at: <code>/blog/${slug}</code></li>
              <li>The post will appear in the blog listing at <code>/blog</code></li>
            </ol>
          </div>
          
          <div style="margin-top: 20px;">
            <button class="btn" onclick="copyToClipboard()">üìã Copy to Clipboard</button>
            <button class="btn btn-secondary" onclick="document.getElementById('output').innerHTML = ''">Close</button>
          </div>
        </div>
      `;
      
      // Scroll to output
      output.scrollIntoView({ behavior: 'smooth' });
    });
    
    function clearForm() {
      document.getElementById('postForm').reset();
      document.getElementById('date').valueAsDate = new Date();
      document.getElementById('output').innerHTML = '';
    }
    
    function copyToClipboard() {
      const textarea = document.querySelector('#output textarea');
      textarea.select();
      document.execCommand('copy');
      
      // Show feedback
      const button = event.target;
      const originalText = button.textContent;
      button.textContent = '‚úÖ Copied!';
      button.style.background = '#10b981';
      setTimeout(() => {
        button.textContent = originalText;
        button.style.background = '#2563eb';
      }, 2000);
    }
    
    // Add some helpful keyboard shortcuts
    document.addEventListener('keydown', function(e) {
      if (e.ctrlKey || e.metaKey) {
        if (e.key === 'Enter') {
          e.preventDefault();
          document.getElementById('postForm').dispatchEvent(new Event('submit'));
        }
      }
    });
  </script>
</body>
</html>